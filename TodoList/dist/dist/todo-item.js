webpackJsonp([0],[
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function createItemElement() {
    const li = document.createElement('li');
    li.classList.add('todo-list--item');
    li.innerHTML = `
		<label class='check-label'>
			<input type="checkbox" class='check' />
		</label>
		<div class="edit-input" contenteditable="false" ></div>
		<div class="edit"></div>
		<div class="delete">Ã—</div>
	`;
    return li;
}
exports.createItemElement = createItemElement;
/**
 * Class represents TodoListItem.
 * @param {HTMLElement} item - DOM Element (<li>).
 *
 * @property {HTMLElement} item - <li>.
 * @property {HTMLElement} delete - delete <li>.
 * @property {HTMLElement} check - checkbox inside <li>.
 * @property {HTMLElement} editElem -  btn for edit input
 */
class TodoListItem {
    constructor(item = null, checked = false, content = '') {
        this.itemElem = item;
        this.input = this.itemElem.querySelector('.edit-input');
        this.delete = this.itemElem.querySelector('.delete');
        this.check = this.itemElem.querySelector('.check');
        this.editElem = this.itemElem.querySelector('.edit');
        this.labelElem = this.itemElem.querySelector('.check-label');
        this.parent = (() => {
            let todo = this.itemElem.parentElement;
            while (!todo.classList.contains('todo-list')) {
                todo = todo.parentElement;
            }
            return todo;
        })();
        this.state = {
            checked: checked,
            content
        };
        this.setValue(content);
        this.setChecked(checked);
        // create Custom Event
        this.input.addEventListener('keyup', (event) => this.onType(event));
        this.editElem.addEventListener('click', (event) => this.onEdit(event));
        this.check.addEventListener('click', (event) => this.ClickCheckbox(event));
        this.delete.addEventListener('click', (event) => this.onDelete(event));
    }
    onType(event) {
        this.setState({ content: this.input.textContent });
    }
    dispStateChangeEvent() {
        const stateEvent = new CustomEvent('todostatechange', {
            bubbles: true,
            detail: {
                item: this,
                state: this.state
            }
        });
        this.itemElem.dispatchEvent(stateEvent);
    }
    setState(newState) {
        this.state = Object.assign({}, this.state, newState);
        this.dispStateChangeEvent();
    }
    ClickCheckbox(event) {
        if (this.isEditable())
            this.toggleEdit();
        if (this.isChecked()) {
            this.input.style.textDecoration = 'line-through';
            this.setEditable(false);
            this.labelElem.classList.add('check-label-active');
        }
        else {
            this.input.style.textDecoration = 'none';
            this.labelElem.classList.remove('check-label-active');
        }
        this.setState({ checked: this.isChecked() });
    }
    isChecked() {
        return this.check.checked;
    }
    setChecked(flag) {
        this.check.checked = flag;
        if (flag) {
            this.input.style.textDecoration = 'line-through';
            this.setEditable(false);
            this.labelElem.classList.add('check-label-active');
        }
        else {
            this.input.style.textDecoration = 'none';
            this.labelElem.classList.remove('check-label-active');
        }
    }
    setEditable(flag) {
        if (flag) {
            this.input.contentEditable = 'true';
        }
        else {
            this.input.contentEditable = 'false';
        }
    }
    isEditable() {
        return this.input.contentEditable === 'true';
    }
    toggleEdit() {
        if (!this.isEditable()) {
            this.setEditable(true);
            this.input.style.outline = 'auto 5px rgb(77, 144, 254)';
        }
        else {
            this.setEditable(false);
            this.input.style.outline = 'none';
        }
    }
    // click on 'this.editElem' callback
    onEdit(event) {
        if (this.isChecked())
            return;
        this.toggleEdit();
    }
    // click on 'this.delete' callback, dispatch 'closeItem' event.
    onDelete(event) {
        let closeEvent = new CustomEvent('closeItem', {
            bubbles: true,
            cancelable: true,
            detail: {
                item: this
            }
        });
        this.itemElem.dispatchEvent(closeEvent);
        this.remove();
    }
    remove() {
        this.parent.removeChild(this.itemElem);
        return this;
    }
    getItem() {
        return this.itemElem;
    }
    /**
     * @param {Object} obj - obj with styles
     */
    setStyle(obj) {
        for (let prop in obj) {
            this.itemElem.style[prop] = obj[prop];
        }
    }
    /**
     * @param {string} text - input value.
     */
    setValue(text = '') {
        this.input.textContent = text;
    }
}
exports.TodoListItem = TodoListItem;


/***/ })
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvdG9kb0xpc3RJdGVtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQTtJQUNDLE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUVwQyxFQUFFLENBQUMsU0FBUyxHQUFHOzs7Ozs7O0VBT2QsQ0FBQztJQUVGLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDWCxDQUFDO0FBRVEsOENBQWlCO0FBSTFCOzs7Ozs7OztHQVFHO0FBQ0g7SUFXQyxZQUFhLElBQUksR0FBRyxJQUFJLEVBQUUsT0FBTyxHQUFHLEtBQUssRUFBRSxPQUFPLEdBQUcsRUFBRTtRQUV0RCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsS0FBSyxHQUFtQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsTUFBTSxHQUFtQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsS0FBSyxHQUFxQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsUUFBUSxHQUFtQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsU0FBUyxHQUFxQixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUUvRSxJQUFJLENBQUMsTUFBTSxHQUFxQixDQUFDO1lBQ2hDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDO1lBQ3ZDLE9BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFB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R0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQztDQUVEO0FBNUtELG9DQTRLQyIsImZpbGUiOiJkaXN0L3RvZG8taXRlbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElTdGF0ZUxpc3RJdGVtIH0gZnJvbSAnLi9JU3RhdGVzJztcblxuXG5mdW5jdGlvbiBjcmVhdGVJdGVtRWxlbWVudCgpe1xuXHRjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cdGxpLmNsYXNzTGlzdC5hZGQoJ3RvZG8tbGlzdC0taXRlbScpO1xuXG5cdGxpLmlubmVySFRNTCA9IGBcblx0XHQ8bGFiZWwgY2xhc3M9J2NoZWNrLWxhYmVsJz5cblx0XHRcdDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz0nY2hlY2snIC8+XG5cdFx0PC9sYWJlbD5cblx0XHQ8ZGl2IGNsYXNzPVwiZWRpdC1pbnB1dFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIgPjwvZGl2PlxuXHRcdDxkaXYgY2xhc3M9XCJlZGl0XCI+PC9kaXY+XG5cdFx0PGRpdiBjbGFzcz1cImRlbGV0ZVwiPsOXPC9kaXY+XG5cdGA7XG5cdFxuXHRyZXR1cm4gbGk7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUl0ZW1FbGVtZW50IH07XG5cblxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudHMgVG9kb0xpc3RJdGVtLlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaXRlbSAtIERPTSBFbGVtZW50ICg8bGk+KS5cbiAqIFxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gaXRlbSAtIDxsaT4uXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBkZWxldGUgLSBkZWxldGUgPGxpPi5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IGNoZWNrIC0gY2hlY2tib3ggaW5zaWRlIDxsaT4uXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBlZGl0RWxlbSAtICBidG4gZm9yIGVkaXQgaW5wdXRcbiAqL1xuZXhwb3J0IGNsYXNzIFRvZG9MaXN0SXRlbXtcblxuXHRpdGVtRWxlbTogSFRNTExJRWxlbWVudDtcblx0aW5wdXQ6IEhUTUxEaXZFbGVtZW50O1xuXHRkZWxldGU6IEhUTUxEaXZFbGVtZW50O1xuXHRjaGVjazogSFRNTElucHV0RWxlbWVudDtcblx0ZWRpdEVsZW06IEhUTUxEaXZFbGVtZW50O1xuXHRsYWJlbEVsZW06IEhUTUxMYWJlbEVsZW1lbnQ7XG5cdHBhcmVudDogSFRNTFVMaXN0RWxlbWVudDtcblx0c3RhdGU6IElTdGF0ZUxpc3RJdGVtO1xuXG5cdGNvbnN0cnVjdG9yKCBpdGVtID0gbnVsbCwgY2hlY2tlZCA9IGZhbHNlLCBjb250ZW50ID0gJycgKXtcblxuXHRcdHRoaXMuaXRlbUVsZW0gPSBpdGVtO1xuXHRcdHRoaXMuaW5wdXQgPSA8SFRNTERpdkVsZW1lbnQ+dGhpcy5pdGVtRWxlbS5xdWVyeVNlbGVjdG9yKCcuZWRpdC1pbnB1dCcpO1xuXHRcdHRoaXMuZGVsZXRlID0gPEhUTUxEaXZFbGVtZW50PnRoaXMuaXRlbUVsZW0ucXVlcnlTZWxlY3RvcignLmRlbGV0ZScpO1xuXHRcdHRoaXMuY2hlY2sgPSA8SFRNTElucHV0RWxlbWVudD50aGlzLml0ZW1FbGVtLnF1ZXJ5U2VsZWN0b3IoJy5jaGVjaycpO1xuXHRcdHRoaXMuZWRpdEVsZW0gPSA8SFRNTERpdkVsZW1lbnQ+dGhpcy5pdGVtRWxlbS5xdWVyeVNlbGVjdG9yKCcuZWRpdCcpOyBcblx0XHR0aGlzLmxhYmVsRWxlbSA9IDxIVE1MTGFiZWxFbGVtZW50PnRoaXMuaXRlbUVsZW0ucXVlcnlTZWxlY3RvcignLmNoZWNrLWxhYmVsJyk7XG5cblx0XHR0aGlzLnBhcmVudCA9IDxIVE1MVUxpc3RFbGVtZW50PigoKSA9PiB7XG5cdFx0XHRsZXQgdG9kbyA9IHRoaXMuaXRlbUVsZW0ucGFyZW50RWxlbWVudDtcblx0XHRcdHdoaWxlKCF0b2RvLmNsYXNzTGlzdC5jb250YWlucygndG9kby1saXN0Jykpe1xuXHRcdFx0XHR0b2RvID0gdG9kby5wYXJlbnRFbGVtZW50O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRvZG87XG5cdFx0fSkoKTtcblxuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRjaGVja2VkOiBjaGVja2VkLFxuXHRcdFx0Y29udGVudFxuXHRcdH1cblxuXHRcdHRoaXMuc2V0VmFsdWUoY29udGVudCk7XG5cdFx0dGhpcy5zZXRDaGVja2VkKGNoZWNrZWQpO1xuXHRcdCBcblx0XHQvLyBjcmVhdGUgQ3VzdG9tIEV2ZW50XG5cblx0XHR0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50OiBFdmVudCkgPT4gdGhpcy5vblR5cGUoZXZlbnQpKTtcblxuXHRcdHRoaXMuZWRpdEVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQ6IEV2ZW50KSA9PiB0aGlzLm9uRWRpdChldmVudCkpO1xuXG5cdFx0dGhpcy5jaGVjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudDogRXZlbnQpID0+IHRoaXMuQ2xpY2tDaGVja2JveChldmVudCkpO1xuXG5cdFx0dGhpcy5kZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQ6IEV2ZW50KSA9PiB0aGlzLm9uRGVsZXRlKGV2ZW50KSk7XG5cdH1cblxuXG5cblx0b25UeXBlKGV2ZW50OiBFdmVudCk6IHZvaWR7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7Y29udGVudDogdGhpcy5pbnB1dC50ZXh0Q29udGVudH0pO1xuXHR9XG5cblx0ZGlzcFN0YXRlQ2hhbmdlRXZlbnQoKTogdm9pZHtcblx0XHRjb25zdCBzdGF0ZUV2ZW50OiBFdmVudCA9IG5ldyBDdXN0b21FdmVudCgndG9kb3N0YXRlY2hhbmdlJyx7XG5cdFx0XHRidWJibGVzOiB0cnVlLFxuXHRcdFx0ZGV0YWlsOntcblx0XHRcdFx0aXRlbTogdGhpcyxcblx0XHRcdFx0c3RhdGU6IHRoaXMuc3RhdGVcblx0XHRcdH1cblx0XHQgfSk7XG5cdFx0IHRoaXMuaXRlbUVsZW0uZGlzcGF0Y2hFdmVudChzdGF0ZUV2ZW50KTtcblx0fVxuXG5cdHNldFN0YXRlKG5ld1N0YXRlOiBJU3RhdGVMaXN0SXRlbSk6IHZvaWR7XG5cdFx0dGhpcy5zdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUsIG5ld1N0YXRlKTtcblx0XHR0aGlzLmRpc3BTdGF0ZUNoYW5nZUV2ZW50KCk7XG5cdH1cblxuXHRDbGlja0NoZWNrYm94KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuXHRcdGlmKHRoaXMuaXNFZGl0YWJsZSgpKSB0aGlzLnRvZ2dsZUVkaXQoKTtcblx0XHRpZih0aGlzLmlzQ2hlY2tlZCgpKXtcblx0XHRcdHRoaXMuaW5wdXQuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJztcblx0XHRcdHRoaXMuc2V0RWRpdGFibGUoZmFsc2UpO1xuXHRcdFx0dGhpcy5sYWJlbEVsZW0uY2xhc3NMaXN0LmFkZCgnY2hlY2stbGFiZWwtYWN0aXZlJyk7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHR0aGlzLmlucHV0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xuXHRcdFx0dGhpcy5sYWJlbEVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2stbGFiZWwtYWN0aXZlJyk7XHRcdFx0XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXRTdGF0ZSh7Y2hlY2tlZDogdGhpcy5pc0NoZWNrZWQoKX0pO1xuXHRcdFxuXG5cdH1cblxuXHRpc0NoZWNrZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuY2hlY2suY2hlY2tlZDsgXG5cdH1cblxuXHRzZXRDaGVja2VkKGZsYWc6IGJvb2xlYW4pOiB2b2lke1xuXHRcdHRoaXMuY2hlY2suY2hlY2tlZCA9IGZsYWc7XG5cdFx0aWYoZmxhZyl7XG5cdFx0XHR0aGlzLmlucHV0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG5cdFx0XHR0aGlzLnNldEVkaXRhYmxlKGZhbHNlKTtcblx0XHRcdHRoaXMubGFiZWxFbGVtLmNsYXNzTGlzdC5hZGQoJ2NoZWNrLWxhYmVsLWFjdGl2ZScpO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0dGhpcy5pbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJztcblx0XHRcdHRoaXMubGFiZWxFbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrLWxhYmVsLWFjdGl2ZScpO1xuXHRcdH1cblx0fVxuXG5cdHNldEVkaXRhYmxlKGZsYWc6IGJvb2xlYW4pOiB2b2lke1xuXHRcdGlmKGZsYWcpe1xuXHRcdFx0dGhpcy5pbnB1dC5jb250ZW50RWRpdGFibGUgPSAndHJ1ZSc7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHR0aGlzLmlucHV0LmNvbnRlbnRFZGl0YWJsZSA9ICdmYWxzZSc7XG5cdFx0fVxuXHR9XG5cblx0aXNFZGl0YWJsZSgpOiBib29sZWFue1xuXHRcdHJldHVybiB0aGlzLmlucHV0LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnO1xuXHR9XG5cblx0dG9nZ2xlRWRpdCgpOiB2b2lke1xuXHRcdGlmKCF0aGlzLmlzRWRpdGFibGUoKSl7XG5cdFx0XHR0aGlzLnNldEVkaXRhYmxlKHRydWUpO1xuXHRcdFx0dGhpcy5pbnB1dC5zdHlsZS5vdXRsaW5lID0gJ2F1dG8gNXB4IHJnYig3NywgMTQ0LCAyNTQpJztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLnNldEVkaXRhYmxlKGZhbHNlKTtcblx0XHRcdHRoaXMuaW5wdXQuc3R5bGUub3V0bGluZSA9ICdub25lJztcblx0XHR9IFxuXHR9XG5cblx0Ly8gY2xpY2sgb24gJ3RoaXMuZWRpdEVsZW0nIGNhbGxiYWNrXG5cdG9uRWRpdChldmVudDogRXZlbnQpOiB2b2lke1xuXHRcdGlmKHRoaXMuaXNDaGVja2VkKCkpIHJldHVybjtcblxuXHRcdHRoaXMudG9nZ2xlRWRpdCgpO1xuXHR9XG5cblx0Ly8gY2xpY2sgb24gJ3RoaXMuZGVsZXRlJyBjYWxsYmFjaywgZGlzcGF0Y2ggJ2Nsb3NlSXRlbScgZXZlbnQuXG5cdG9uRGVsZXRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1x0XHRcdFx0XHRcblx0XHRsZXQgY2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2xvc2VJdGVtJywge1xuXHRcdFx0IFx0YnViYmxlczogdHJ1ZSxcblx0XHRcdFx0Y2FuY2VsYWJsZTogdHJ1ZSxcblx0XHRcdFx0ZGV0YWlsOntcblx0XHRcdFx0XHRpdGVtOiB0aGlzXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdHRoaXMuaXRlbUVsZW0uZGlzcGF0Y2hFdmVudChjbG9zZUV2ZW50KTtcblx0XHR0aGlzLnJlbW92ZSgpOyAgXG5cdH1cblxuXHRyZW1vdmUoKTogVG9kb0xpc3RJdGVte1xuXHRcdHRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuaXRlbUVsZW0pO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0SXRlbSgpOiBIVE1MTElFbGVtZW50e1xuXHRcdHJldHVybiB0aGlzLml0ZW1FbGVtO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBvYmogd2l0aCBzdHlsZXMgIFxuXHQgKi9cblx0c2V0U3R5bGUob2JqOiBhbnkpe1xuXHRcdGZvcihsZXQgcHJvcCBpbiBvYmope1xuXHRcdFx0dGhpcy5pdGVtRWxlbS5zdHlsZVtwcm9wXSA9IG9ialtwcm9wXTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBpbnB1dCB2YWx1ZS5cblx0ICovXG5cdHNldFZhbHVlKHRleHQ6IHN0cmluZyA9ICcnKSB7XG5cdFx0dGhpcy5pbnB1dC50ZXh0Q29udGVudCA9IHRleHQ7XG5cdH1cblxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy90b2RvTGlzdEl0ZW0udHMiXSwic291cmNlUm9vdCI6IiJ9